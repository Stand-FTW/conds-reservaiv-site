"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2353],{12353:(L,v,r)=>{r.r(v),r.d(v,{PasswordResetPageModule:()=>a});var e=r(97582),_=r(98274),m=r(36895),p=r(24006),g=r(48058),E=r(1236),d=r(92665),x=r(85226),y=r(39528);var b=r(50727),P=r(10805),k=r(86437),h=r(8601),f=r(98739);let s=class{constructor(n,l,c,u,M,C){this.formBuilder=n,this.passwordService=l,this.router=c,this.menu=u,this.themeService=M,this.toastService=C,this.stepIndex=0,this.subscriptions=new b.w0,this.form=this.formBuilder.group({codigo:[,[p.kI.required]],email:[,[p.kI.required,p.kI.email]],senha:[,[p.kI.required,p.kI.minLength(6)]]})}ngOnInit(){document.body.setAttribute("color-theme","light"),this.themeService.switchTheme("saga-blue"),this.steps=[{label:"Recupera\xe7\xe3o"},{label:"Reset"}]}ngOnDestroy(){this.subscriptions.unsubscribe(),this.stepIndex=0}ionViewWillEnter(){this.stepIndex=0,document.body.setAttribute("color-theme","light"),this.themeService.switchTheme("saga-blue"),this.menu.enable(!1)}goBack(){this.stepIndex=0,this.router.navigateByUrl("login")}setFocus(n){n.setFocus()}sendRequest(){const n=this.form.get("email").value,l=this.passwordService.requestReset(n).subscribe(c=>{this.stepIndex++});this.subscriptions.add(l)}doReset(){const n=this.form.get("codigo").value,l=this.form.get("senha").value,c=this.passwordService.doReset(n,l).subscribe(u=>{this.presentToast("success","Sucesso!","Senha alterada",f.m4.mediumDuration),this.goBack()});this.subscriptions.add(c)}isInputError(n){return!(!this.form.controls[n].dirty||!this.form.controls[n].errors)}disableBTN(){return!this.form.valid}presentToast(n,l,c,u){this.toastService.clear(),this.toastService.add({severity:n,summary:l,detail:c,life:u})}};s.ctorParameters=()=>[{type:p.QS},{type:k.C},{type:y.F0},{type:g._q},{type:h.f},{type:P.ez}],s=(0,e.gn)([(0,_.wA2)({selector:"app-password-reset",template:'<ion-header>\n  <ion-toolbar>\n    <ion-buttons slot="start" (click)="goBack()">\n      <ion-button style="min-width: 70px;" size="large" color="primary" shape="round" fill="outline">\n        <ion-icon style="font-size:40px" name="arrow-undo-outline"></ion-icon>\n      </ion-button>\n    </ion-buttons>\n    <ion-title>\n      Recupera\xe7\xe3o de senha\n    </ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content appScrollTheme>\n\n  <ion-grid>\n\n\n    <div class="border">\n      <div class="limiter">\n\n        <form [formGroup]="form" (ngSubmit)="$event.preventDefault()">\n\n          <ng-container *ngIf="stepIndex == 0">\n            <ion-row>\n              <ion-col>\n                <ion-item style="margin-top: 5px;" color="light">\n                  <ion-input color="primary" (keyup.enter)="sendRequest()" formControlName="email" type="email"\n                    placeholder="Insira seu email"></ion-input>\n                </ion-item>\n              </ion-col>\n            </ion-row>\n\n            <ion-row>\n              <ion-col>\n                <ion-button expand="block" fill="solid" [disabled]="!this.form.get(\'email\').valid"\n                  (click)="sendRequest()">Enviar\n                </ion-button>\n              </ion-col>\n            </ion-row>\n          </ng-container>\n\n          <ng-container *ngIf="stepIndex == 1">\n            <ion-row>\n              <ion-col>\n                <ion-item style="margin-top: 5px;" color="light">\n                  <ion-input color="primary" (keyup.enter)="setFocus(pass)" formControlName="codigo"\n                  type="input" placeholder="Insira o c\xf3digo recebido em seu e-mail"></ion-input>\n                </ion-item>\n              </ion-col>\n            </ion-row>\n\n            <ion-row>\n              <ion-col>\n                <ion-item color="light">\n                  <ion-input #pass color="primary"  formControlName="senha" type="password"\n                    placeholder="Insira sua nova senha"></ion-input>\n                </ion-item>\n                <p-message [style]="{\'margin-top\': \'3px\'}" severity="error" text="Obrigat\xf3rio, m\xednimo de 6 caracteres"\n                  *ngIf="isInputError(\'senha\')"></p-message>\n              </ion-col>\n            </ion-row>\n\n            <ion-row>\n              <ion-col>\n                <ion-button expand="block" fill="solid" [disabled]="disableBTN()" (click)="doReset()">Resetar\n                </ion-button>\n              </ion-col>\n            </ion-row>\n\n          </ng-container>\n\n        </form>\n      </div>\n    </div>\n  </ion-grid>\n\n\n</ion-content>',styles:[""]})],s);const o=[{path:"",component:s}];let t=class{};t=(0,e.gn)([(0,_.LVF)({imports:[y.Bz.forChild(o)],exports:[y.Bz]})],t);let a=class{};a=(0,e.gn)([(0,_.LVF)({imports:[m.ez,p.u5,p.UX,g.Pc,E.q,d.O,t,x.o],declarations:[s]})],a)},86437:(L,v,r)=>{r.d(v,{C:()=>g});var e=r(97582),_=r(80529),m=r(98274),p=r(99038);let g=class{constructor(d){this.http=d}requestReset(d){return this.http.post(`${p.Hz.baseURL}/auth/forgot`,{email:d},{responseType:"json"})}doReset(d,x){const y=(new _.LE).set("token",d);return this.http.post(`${p.Hz.baseURL}/auth/reset`,{password:x},{params:y})}change(d){return this.http.patch(`${p.Hz.baseURL}/password/change`,{senha:d})}};g.ctorParameters=()=>[{type:_.eN}],g=(0,e.gn)([(0,m.GSi)({providedIn:"root"})],g)},1236:(L,v,r)=>{r.d(v,{q:()=>f});var e=r(98274),_=r(36895),m=r(39528),p=r(3608);function g(s,o){if(1&s&&(e.TgZ(0,"span",11),e._uU(1),e.qZA()),2&s){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(t.label)}}function E(s,o){if(1&s&&e._UZ(0,"span",12),2&s){const t=e.oxw(2).$implicit;e.Q6J("innerHTML",t.label,e.oJD)}}const d=function(){return{exact:!1}};function x(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"a",7),e.NdJ("click",function(i){e.CHM(t);const n=e.oxw(),l=n.$implicit,c=n.index,u=e.oxw();return e.KtG(u.itemClick(i,l,c))})("keydown.enter",function(i){e.CHM(t);const n=e.oxw(),l=n.$implicit,c=n.index,u=e.oxw();return e.KtG(u.itemClick(i,l,c))}),e.TgZ(1,"span",8),e._uU(2),e.qZA(),e.YNc(3,g,2,1,"span",9),e.YNc(4,E,1,1,"ng-template",null,10,e.W1O),e.qZA()}if(2&s){const t=e.MAs(5),a=e.oxw(),i=a.$implicit,n=a.index,l=e.oxw();e.Q6J("routerLink",i.routerLink)("queryParams",i.queryParams)("routerLinkActive","p-menuitem-link-active")("routerLinkActiveOptions",i.routerLinkActiveOptions||e.DdM(16,d))("target",i.target)("fragment",i.fragment)("queryParamsHandling",i.queryParamsHandling)("preserveFragment",i.preserveFragment)("skipLocationChange",i.skipLocationChange)("replaceUrl",i.replaceUrl)("state",i.state),e.uIk("id",i.id)("tabindex",i.disabled||l.readonly?null:i.tabindex?i.tabindex:"0"),e.xp6(2),e.Oqu(n+1),e.xp6(1),e.Q6J("ngIf",!1!==i.escape)("ngIfElse",t)}}function y(s,o){if(1&s&&(e.TgZ(0,"span",11),e._uU(1),e.qZA()),2&s){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(t.label)}}function I(s,o){if(1&s&&e._UZ(0,"span",12),2&s){const t=e.oxw(2).$implicit;e.Q6J("innerHTML",t.label,e.oJD)}}function O(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"a",13),e.NdJ("click",function(i){e.CHM(t);const n=e.oxw(),l=n.$implicit,c=n.index,u=e.oxw();return e.KtG(u.itemClick(i,l,c))})("keydown.enter",function(i){e.CHM(t);const n=e.oxw(),l=n.$implicit,c=n.index,u=e.oxw();return e.KtG(u.itemClick(i,l,c))}),e.TgZ(1,"span",8),e._uU(2),e.qZA(),e.YNc(3,y,2,1,"span",9),e.YNc(4,I,1,1,"ng-template",null,14,e.W1O),e.qZA()}if(2&s){const t=e.MAs(5),a=e.oxw(),i=a.$implicit,n=a.index,l=e.oxw();e.Q6J("target",i.target),e.uIk("href",i.url,e.LSH)("id",i.id)("tabindex",i.disabled||n!==l.activeIndex&&l.readonly?null:i.tabindex?i.tabindex:"0"),e.xp6(2),e.Oqu(n+1),e.xp6(1),e.Q6J("ngIf",!1!==i.escape)("ngIfElse",t)}}const b=function(s,o){return{"p-highlight p-steps-current":s,"p-disabled":o}};function P(s,o){if(1&s&&(e.TgZ(0,"li",3,4),e.YNc(2,x,6,17,"a",5),e.YNc(3,O,6,7,"ng-template",null,6,e.W1O),e.qZA()),2&s){const t=o.$implicit,a=o.index,i=e.MAs(4),n=e.oxw();e.Tol(t.styleClass),e.Q6J("ngStyle",t.style)("tooltipOptions",t.tooltipOptions)("ngClass",e.WLB(9,b,n.isActive(t,a),t.disabled||n.readonly&&!n.isActive(t,a))),e.uIk("aria-selected",a===n.activeIndex)("aria-expanded",a===n.activeIndex),e.xp6(2),e.Q6J("ngIf",n.isClickableRouterLink(t))("ngIfElse",i)}}const k=function(s){return{"p-steps p-component":!0,"p-readonly":s}};class h{constructor(o,t,a){this.router=o,this.route=t,this.cd=a,this.activeIndex=0,this.readonly=!0,this.activeIndexChange=new e.vpe}ngOnInit(){this.subscription=this.router.events.subscribe(()=>this.cd.markForCheck())}itemClick(o,t,a){this.readonly||t.disabled?o.preventDefault():(this.activeIndexChange.emit(a),!t.url&&!t.routerLink&&o.preventDefault(),t.command&&t.command({originalEvent:o,item:t,index:a}))}isClickableRouterLink(o){return o.routerLink&&!this.readonly&&!o.disabled}isActive(o,t){if(o.routerLink){let a=Array.isArray(o.routerLink)?o.routerLink:[o.routerLink];return this.router.isActive(this.router.createUrlTree(a,{relativeTo:this.route}).toString(),!1)}return t===this.activeIndex}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}h.\u0275fac=function(o){return new(o||h)(e.Y36(m.F0),e.Y36(m.gz),e.Y36(e.sBO))},h.\u0275cmp=e.Xpm({type:h,selectors:[["p-steps"]],hostAttrs:[1,"p-element"],inputs:{activeIndex:"activeIndex",model:"model",readonly:"readonly",style:"style",styleClass:"styleClass"},outputs:{activeIndexChange:"activeIndexChange"},decls:3,vars:7,consts:[[3,"ngClass","ngStyle"],["role","tablist"],["class","p-steps-item","role","tab","pTooltip","",3,"ngStyle","class","tooltipOptions","ngClass",4,"ngFor","ngForOf"],["role","tab","pTooltip","",1,"p-steps-item",3,"ngStyle","tooltipOptions","ngClass"],["menuitem",""],["role","presentation","class","p-menuitem-link",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","keydown.enter",4,"ngIf","ngIfElse"],["elseBlock",""],["role","presentation",1,"p-menuitem-link",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","keydown.enter"],[1,"p-steps-number"],["class","p-steps-title",4,"ngIf","ngIfElse"],["htmlLabel",""],[1,"p-steps-title"],[1,"p-steps-title",3,"innerHTML"],["role","presentation",1,"p-menuitem-link",3,"target","click","keydown.enter"],["htmlRouteLabel",""]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"ul",1),e.YNc(2,P,5,12,"li",2),e.qZA()()),2&o&&(e.Tol(t.styleClass),e.Q6J("ngClass",e.VKq(5,k,t.readonly))("ngStyle",t.style),e.xp6(2),e.Q6J("ngForOf",t.model))},dependencies:[_.mk,_.sg,_.O5,_.PC,m.yS,m.Od,p.u],styles:[".p-steps{position:relative}.p-steps ul{padding:0;margin:0;list-style-type:none;display:flex}.p-steps-item{position:relative;display:flex;justify-content:center;flex:1 1 auto}.p-steps-item .p-menuitem-link{display:inline-flex;flex-direction:column;align-items:center;overflow:hidden;text-decoration:none}.p-steps.p-steps-readonly .p-steps-item{cursor:auto}.p-steps-item.p-steps-current .p-menuitem-link{cursor:default}.p-steps-title{white-space:nowrap}.p-steps-number{display:flex;align-items:center;justify-content:center}.p-steps-title{display:block}\n"],encapsulation:2,changeDetection:0});class f{}f.\u0275fac=function(o){return new(o||f)},f.\u0275mod=e.oAB({type:f,declarations:[h],imports:[_.ez,m.Bz,p.z],exports:[h,m.Bz,p.z]}),f.\u0275inj=e.cJS({imports:[_.ez,m.Bz,p.z,m.Bz,p.z]})}}]);